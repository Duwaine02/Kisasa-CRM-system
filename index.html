<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kisasa CRM â€“ Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --sidebar-width: 70px;
            --bg-main: #fcfcfc;
            --border: #eeeeee;
            --text-main: #1a1c1e;
            --whatsapp: #25D366;
            --phone: #3b82f6;
            --quote: #6366f1;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
        
        body { 
            background: var(--bg-main); 
            display: flex; 
            min-height: 100vh; 
            width: 100vw; 
            overflow-x: hidden; 
            color: var(--text-main);
            transition: opacity 0.6s ease;
        }

        body.fade-out { opacity: 0; pointer-events: none; }

        /* --- SIDEBAR --- */
        .sidebar {
            width: var(--sidebar-width); background: #fff;
            display: flex; flex-direction: column; align-items: center;
            padding: 1.5rem 0; position: fixed; height: 100vh;
            border-right: 1px solid var(--border); z-index: 1000;
        }
        .sidebar .logo { font-size: 0.6rem; font-weight: 800; letter-spacing: 2px; margin-bottom: 3rem; color: #000; }
        .sidebar nav { display: flex; flex-direction: column; gap: 1.2rem; }
        .sidebar a { color: #ccc; font-size: 1.2rem; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; text-decoration: none; transition: 0.2s; }
        
        /* Only the Gauge icon is active here */
        .sidebar a.active { background: #1a1c1e; color: white; }

        /* --- MAIN CONTENT --- */
        main { flex: 1; margin-left: var(--sidebar-width); padding: 1rem 2rem; display: flex; flex-direction: column; align-items: center; }
        .dashboard-wrapper { width: 100%; max-width: 1200px; min-width: 950px; }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; width: 100%; }
        .header h1 { font-size: 1.4rem; font-weight: 700; }

        .stats-grid { display: flex; gap: 12px; margin-bottom: 1rem; width: 100%; }
        .stat-card { background: white; border: 1px solid var(--border); padding: 0.6rem 1rem; flex: 1; height: 60px; border-radius: 4px; }
        .stat-card p { font-size: 0.55rem; font-weight: 800; color: #999; text-transform: uppercase; margin-bottom: 2px; }
        .stat-card h2 { font-size: 1rem; font-weight: 800; }

        .chart-container { background: white; border: 1px solid var(--border); margin-bottom: 1.2rem; height: 140px; width: 100%; border-radius: 4px; padding: 10px; }

        /* --- PIPELINE GRID --- */
        .pipeline-grid { display: flex; gap: 15px; width: 100%; align-items: flex-start; }
        .column { background: #ffffff; border: 1px solid var(--border); padding: 0.8rem; border-radius: 6px; flex: 1; min-height: 450px; }
        .column-header { display: flex; justify-content: space-between; border-bottom: 1px solid #f8f8f8; padding-bottom: 8px; margin-bottom: 12px; }
        .column-header h3 { font-size: 0.7rem; font-weight: 800; text-transform: uppercase; color: #444; }
        .count-badge { font-size: 0.65rem; font-weight: 800; background: #000; color: #fff; padding: 1px 6px; border-radius: 3px; }

        .lead-card {
            background: #fff; border: 1px solid var(--border); padding: 10px 12px; margin-bottom: 6px;
            display: flex; justify-content: space-between; align-items: center; border-radius: 4px; font-size: 0.8rem; transition: 0.2s;
        }
        .lead-card:hover { border-color: #d1d1d1; }

        .lead-info { display: flex; align-items: center; gap: 8px; flex: 1; }
        .lead-name { font-weight: 600; color: #1a1c1e; }
        
        .lead-actions { display: flex; gap: 10px; align-items: center; margin-right: 12px; }
        .action-btn { text-decoration: none; font-size: 0.8rem; color: #ccc; transition: 0.2s; cursor: pointer; }
        .action-btn:hover.wa { color: var(--whatsapp); }
        .action-btn:hover.ph { color: var(--phone); }
        .action-btn:hover.qt { color: var(--quote); }

        .lead-price { font-weight: 700; font-size: 0.75rem; color: #000; min-width: 65px; text-align: right; }
        .status-tag { font-size: 0.5rem; font-weight: 800; padding: 2px 4px; border-radius: 2px; text-transform: uppercase; }

        .fab { position: fixed; bottom: 30px; right: 30px; width: 45px; height: 45px; background: #000; color: white; border: none; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; transition: transform 0.2s; }
        .fab:hover { transform: scale(1.1); }
    </style>
</head>
<body>

<aside class="sidebar">
    <div class="logo">KISASA</div>
    <nav>
        <a href="index.html" class="active" title="Dashboard"><i class="fa-solid fa-gauge-high"></i></a>
        <a href="leads.html" title="Users"><i class="fa-regular fa-circle-user"></i></a>
        <a href="quotes.html" title="Quotes"><i class="fa-solid fa-file-invoice-dollar"></i></a>
    </nav>
</aside>

<main>
    <div class="dashboard-wrapper">
        <div class="header">
            <h1>Dashboard</h1>
            <div style="font-size: 0.8rem; font-weight: 600;">Duwaine Julies <i class="fa-solid fa-power-off" style="margin-left:10px; cursor: pointer;"></i></div>
        </div>

        <section class="stats-grid">
            <div class="stat-card"><p>Leads</p><h2>8</h2></div>
            <div class="stat-card"><p>Tasks</p><h2>2</h2></div>
            <div class="stat-card"><p>Wins</p><h2>3</h2></div>
            <div class="stat-card"><p>Win %</p><h2>38%</h2></div>
            <div class="stat-card"><p>Revenue</p><h2>R 62,222</h2></div>
        </section>

        <div class="chart-container">
            <canvas id="performanceChart"></canvas>
        </div>

        <section class="pipeline-grid">
            <div class="column">
                <div class="column-header"><h3>Drafts</h3><span class="count-badge">2</span></div>
                <div class="lead-card">
                    <div class="lead-info">
                        <span class="status-tag" style="background:#f1f5f9; color:#475569;">Cold</span>
                        <span class="lead-name">Jake</span>
                    </div>
                    <div class="lead-actions">
                        <a href="https://wa.me/27123456789" class="action-btn wa"><i class="fa-brands fa-whatsapp"></i></a>
                        <a class="action-btn ph" onclick="showNumber('012 345 6789')"><i class="fa-solid fa-phone"></i></a>
                        <a class="action-btn qt" onclick="handleQuoteRedirect(this)"><i class="fa-solid fa-file-invoice-dollar"></i></a>
                    </div>
                    <div class="lead-price">R 20,000</div>
                </div>
                <div class="lead-card">
                    <div class="lead-info">
                        <span class="status-tag" style="background:#fef2f2; color:#dc2626;">Hot</span>
                        <span class="lead-name">Duwaine</span>
                    </div>
                    <div class="lead-actions">
                        <a href="#" class="action-btn wa"><i class="fa-brands fa-whatsapp"></i></a>
                        <a class="action-btn ph" onclick="showNumber('072 111 2222')"><i class="fa-solid fa-phone"></i></a>
                        <a class="action-btn qt" onclick="handleQuoteRedirect(this)"><i class="fa-solid fa-file-invoice-dollar"></i></a>
                    </div>
                    <div class="lead-price">R 2,000</div>
                </div>
            </div>

            <div class="column">
                <div class="column-header"><h3>Tasks</h3><span class="count-badge">1</span></div>
                <div class="lead-card">
                    <div class="lead-info">
                        <span class="status-tag" style="background:#fff7ed; color:#c2410c;">Warm</span>
                        <span class="lead-name">Donnie</span>
                    </div>
                    <div class="lead-actions">
                        <a href="#" class="action-btn wa"><i class="fa-brands fa-whatsapp"></i></a>
                        <a class="action-btn ph" onclick="showNumber('083 444 5555')"><i class="fa-solid fa-phone"></i></a>
                        <a class="action-btn qt" onclick="handleQuoteRedirect(this)"><i class="fa-solid fa-file-invoice-dollar"></i></a>
                    </div>
                    <div class="lead-price">R 70,000</div>
                </div>
            </div>

            <div class="column">
                <div class="column-header"><h3>Completed</h3><span class="count-badge">1</span></div>
                <div class="lead-card">
                    <div class="lead-info">
                        <span class="status-tag" style="background:#f0fdf4; color:#16a34a;">Win</span>
                        <span class="lead-name">Sarah</span>
                    </div>
                    <div class="lead-actions">
                        <a href="#" class="action-btn wa"><i class="fa-brands fa-whatsapp"></i></a>
                        <a class="action-btn ph" onclick="showNumber('061 999 8888')"><i class="fa-solid fa-phone"></i></a>
                        <a class="action-btn qt" onclick="handleQuoteRedirect(this)"><i class="fa-solid fa-file-invoice-dollar"></i></a>
                    </div>
                    <div class="lead-price">R 22,222</div>
                </div>
            </div>
        </section>
    </div>
</main>

<button class="fab" title="Add New Lead" onclick="window.location.href='addNewlead.html'">
    <i class="fa-solid fa-plus"></i>
</button>

<script>
    function showNumber(num) { alert("Client Number: " + num); }

    function handleQuoteRedirect(element) {
        element.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
        document.body.classList.add('fade-out');
        setTimeout(() => { window.location.href = 'NewQuote.html'; }, 800);
    }

    const ctx = document.getElementById('performanceChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Drafts', 'Tasks', 'Completed'],
            datasets: [{
                data: [8, 2, 3],
                borderColor: '#000',
                borderWidth: 2,
                tension: 0.4,
                pointRadius: 3,
                pointBackgroundColor: '#000'
            }]
        },
        options: {
            maintainAspectRatio: false,
            plugins: { legend: { display: false } },
            scales: { 
                y: { display: false, beginAtZero: true }, 
                x: { grid: { display: false }, ticks: { font: { size: 9, weight: '600' } } } 
            }
        }
    });
</script>
</body>
</html>