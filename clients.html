<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clients - Kisasa CRM</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    /* Identical to leads.html and dashboard */
    :root {
      --primary: #2563eb;
      --primary-light: #dbeafe;
      --sidebar-bg: #0b1f3b;
      --bg-main: #f1f5f9;
      --card-bg: #ffffff;
      --text-main: #1e293b;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --success: #10b981;
      --danger: #ef4444;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Inter', sans-serif; }
    body { background: var(--bg-main); display: flex; min-height: 100vh; color: var(--text-main); }

    .sidebar { width: 76px; background: var(--sidebar-bg); display: flex; flex-direction: column; align-items: center; padding: 1.5rem 0; position: fixed; height: 100vh; z-index: 1000; }
    .sidebar .logo { color: #60a5fa; font-weight: 800; font-size: 1.2rem; margin-bottom: 2.5rem; }
    .sidebar a { width: 46px; height: 46px; border-radius: 12px; display: flex; align-items: center; justify-content: center; color: #94a3b8; margin-bottom: 0.75rem; transition: all 0.3s; text-decoration: none; }
    .sidebar a:hover { background: rgba(255,255,255,0.08); color: white; }
    .sidebar a.active { background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(37,99,235,0.3); }

    .main-wrapper { margin-left: 76px; flex: 1; padding: 2rem 2.5rem; max-width: 1400px; margin: 0 auto; }

    .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
    .top-bar h1 { font-size: 1.8rem; font-weight: 700; color: #0f172a; }
    .user-info { display: flex; align-items: center; gap: 1rem; background: white; padding: 0.6rem 1.2rem; border-radius: 50px; border: 1px solid var(--border); }
    .avatar { width: 36px; height: 36px; border-radius: 50%; background: var(--primary-light); color: var(--primary); font-weight: 700; display: flex; align-items: center; justify-content: center; }
    .logout { color: var(--text-muted); cursor: pointer; transition: 0.2s; }
    .logout:hover { color: var(--danger); }

    .table-container { background: white; border-radius: 12px; overflow-x: auto; border: 1px solid var(--border); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
    table { width: 100%; border-collapse: collapse; min-width: 900px; }
    th, td { padding: 1rem 1.25rem; text-align: left; border-bottom: 1px solid var(--gray-100); }
    th { background: #f9fafb; font-weight: 600; font-size: 0.8rem; color: var(--text-muted); text-transform: uppercase; white-space: nowrap; }
    tr:hover { background: #f8fafc; cursor: pointer; }
    .badge { padding: 0.4rem 0.9rem; border-radius: 50px; font-size: 0.8rem; font-weight: 600; display: inline-block; }
    .client { background: #dbeafe; color: #1e40af; }

    @media (max-width: 768px) {
      .main-wrapper { padding: 1.5rem 1rem; }
      table, thead, tbody, th, td, tr { display: block; }
      thead tr { position: absolute; top: -9999px; left: -9999px; }
      tr { margin-bottom: 1.5rem; border: 1px solid var(--gray-200); border-radius: 8px; }
      td { border: none; position: relative; padding-left: 50%; text-align: right; }
      td:before { position: absolute; top: 1rem; left: 1.2rem; width: 45%; padding-right: 1rem; white-space: nowrap; font-weight: 600; color: #64748b; content: attr(data-label); text-align: left; }
    }
  </style>
</head>
<body>

<aside class="sidebar">
  <div class="logo">Kisasa</div>
  <nav>
    <a href="index.html" title="Dashboard"><i class="fa-solid fa-gauge-high"></i></a>
    <a href="leads.html" title="Leads"><i class="fa-solid fa-user-plus"></i></a>
    <a href="clients.html" class="active" title="Clients"><i class="fa-solid fa-users"></i></a>
    <a href="quotes.html" title="Quotes"><i class="fa-solid fa-file-invoice"></i></a>
    <a href="reports.html" title="Reports"><i class="fa-solid fa-chart-line"></i></a>
    <a href="settings.html" title="Settings"><i class="fa-solid fa-gear"></i></a>
  </nav>
</aside>

<div class="main-wrapper">
  <div class="top-bar">
    <h1>Clients</h1>
    <div class="user-info">
      <div class="avatar" id="avatarLetter">D</div>
      <span id="userFullName"></span>
      <i class="fa-solid fa-power-off logout" onclick="logout()"></i>
    </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Client</th>
          <th>Email</th>
          <th>ID Number</th>
          <th>Cell</th>
          <th>Status</th>
          <th>Added Date</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<script>
const user = JSON.parse(localStorage.getItem("loggedInUser")) || {name:"Duwaine", surname:"Julies"};
document.getElementById("userFullName").textContent = user.name + " " + user.surname;
document.getElementById("avatarLetter").textContent = user.name[0];

function logout() {
  localStorage.removeItem("loggedInUser");
  window.location.href = "login.html";
}

const data = JSON.parse(localStorage.getItem('kisasa_leads') || '[]');
const tableBody = document.getElementById('tableBody');

function render() {
  tableBody.innerHTML = '';
  const clients = data.filter(item => item.status === 'client' || item.status === 'converted');

  if (clients.length === 0) {
    tableBody.innerHTML = '<tr><td colspan="6" style="text-align:center;padding:3rem;color:#9ca3af;">No clients found</td></tr>';
    return;
  }

  clients.forEach(item => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td style="font-weight:500;" data-label="Client">${item.firstName || ''} ${item.lastName || ''}</td>
      <td data-label="Email">${item.email || '—'}</td>
      <td data-label="ID Number">${item.idNumber || '—'}</td>
      <td data-label="Cell">${item.phone || '—'}</td>
      <td data-label="Status"><span class="badge client">Client</span></td>
      <td data-label="Added Date">${item.date || '—'}</td>
    `;
    row.onclick = () => {
      localStorage.setItem('selectedClient', JSON.stringify(item));
      window.location.href = 'client Detail.html';
    };
    tableBody.appendChild(row);
  });
}

render();
</script>
</body>
</html>